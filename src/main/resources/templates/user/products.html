<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<!--meta(カッコ)の中にページタイトル記述-->
	<div th:replace="user/fragments :: meta('商品一覧')"></div>
	<!--↓各ページのcss-->
	<link th:href="@{/products.css}" rel="stylesheet" type="text/css">
</head>
<body>
	<header th:replace="user/fragments :: siteHeader"></header>
	<section>
	<!--パンくず-->
	<p><a th:href="@{/}">トップ</a> > <span>商品一覧</span></p>
	<h2>商品一覧</h2>
	
	<!--検索タブ-->
     <form method="get" th:action="@{/products/category/{categoryId}}">
	     <div>
			<label for="sort">カテゴリ:</label>
			<select class="dropdown" onchange="location.href=this.value">
				<option th:value="@{/products}"
						th:selected="${selectedCategoryId == null}">
						すべて
				</option>
				<option th:each="category : ${categories}" 
						th:value="@{/products/category/{id}(id=${category.id})}" 
						th:text="${category.name}" 
						th:selected="${category.id == selectedCategoryId}">
				</option>
			</select>
		</div>
	 </form>

     <div>
		<label for="sort">並べ替え:</label>
		<select class="dropdown" onchange="location.href=this.value">
			<option th:value="@{/products(categoryId=${selectedCategoryId}, sort='new')}" 
					th:selected="${sort == 'new'}">新着順</option>
			<option th:value="@{/products(categoryId=${selectedCategoryId}, sort='priceAsc')}" 
					th:selected="${sort == 'priceAsc'}">価格が安い順</option>
			<option th:value="@{/products(categoryId=${selectedCategoryId}, sort='priceDesc')}" 
					th:selected="${sort == 'priceDesc'}">価格が高い順</option>
		</select>
	</div>
		
	<div class="list_wrap">
		<div class="list_cell" th:each="product : ${products}">
		    <a th:href="@{/products_detail/{id}(id=${product.id})}">
				<img th:src="@{${product.imagePath}}" 
					 th:attr="data-img=${product.imagePath}, alt=${product.name}"/>
		        <p th:text="${product.name}">商品名</p>
		        <p th:text="${product.description}">商品説明</p>
				<p th:text="${@priceFormatter.format(product.price)} + （税込）">価格</p>
		    </a>   
		</div>
	</div>
		
	</section>
	<footer th:replace="user/fragments :: siteFooter"></footer>
</body>
</html>